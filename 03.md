# 後半: バイブコーディングでアプリに機能を追加する

Manusで作成したアプリのソースコードをコーディングエージェントに改修させて機能追加をしてみましょう。

## 1 このパートで作る機能

スマホのネイティブ機能にアクセスするアプリまで発展させてみましょう。

> <img src="https://i.gyazo.com/30214679be0d919f673bd2606751d852.gif" width="200px" />

Manusで作成したアプリに機能追加をします。
Manus側では写真投稿やメモ投稿ができましたが、位置情報を取得して地図に表示する機能を追加してみます。

> ※応用までチャレンジした例 => スマホの加速度を使う https://i.gyazo.com/30eecf55fa22658def30a40d43d40e85.gif

## 2. ハンズオン

### 2-1. AIに指示を出して機能追加

以下のプロンプト（AIに指示を出す文章）をコピーし、Gemini CLIに追加指示を出しましょう。

Gemini CLIが起動してない人は起動してください。

```md
React Nativeでアプリ開発中です。まずは現状のアプリ構成を読み込んでください。 

写真を投稿した際のExif情報から位置情報を取得して地図常にマッピングして表示する機能を追加してください。

また、GitHub Codespacesで開発中ですが、Expo Goで確認できるようにngrokモジュールを入れ、npm run tunnelで確認できるようにしてください。
```

> <img src="https://i.gyazo.com/83d2c04decf3c421f8b6150370914cb3.png" width="450px" />

しばらくすると許可を求められます。これは追加のライブラリ（部品のようなもの）をインストールする許可をAIが求めてきています。

`Allow for this session`を選択して進みましょう。

この後にも似たような選択肢がでる場合は`Allow for this session`を選択してください。

> <img src="https://i.gyazo.com/90f78edeb4c994a73ddf35ecb7ea3731.png" width="450px" />

処理が終わるまで待ちましょう。

> <img src="https://i.gyazo.com/7948c05f6e998fbc29865ebc386815bf.png" width="450px" />

### 2-2. ターミナルで起動

Geminiの処理が終わったら隣のターミナルで以下のコマンドを実行します。

```md
npm run tunnel
```

**初回がエラーになる時がありますが、もう一度実行するとうまくいく** 場合が多いです。2~3回実行して起動しない場合はTAや講師に聞いてみましょう。

無事に起動するとQRコードが表示されます。このQRコードをスマホカメラで読み込み、Expo Goで開くことで機能追加を確認できます。

> <img src="https://i.gyazo.com/88ff152caece36620a809bed8604e69e.png" width="450px" />

### 2-3. （エラーが出たら）

> <img src="https://i.gyazo.com/cf19625460a003c5bb0e9b98828ec242.png" width="450px" />

エラー内容を元にGeminiにエラー内容を伝えて修正してもらいます。

### 2-4. 動作させてみる

修正後またExpo Goで見てみるとしっかり地図の表示までしてくれていますね。

> <img src="https://i.gyazo.com/30214679be0d919f673bd2606751d852.gif" width="200px" />

<!-- ### 4.2.2. Expoでの確認

- （npx expo start --tunnel）

#### 練習3. `（ctrl + c）`: サーバー停止

サーバープログラムが起動していると、そのターミナルは次のコマンドが入力できません。

また、**AIがアプリケーションを作成してもサーバーの再起動をしないとアプリケーションが更新されない場合もあります**。

これらを踏まえ、起動したサーバーを一度停止する必要があります。

ターミナルエリアをクリックして選択している状態で、`コントロールキー+C`でサーバーを停止できます。

> コントロールキーとキーボードのCを同時押しです。
>
> <img src="https://i.gyazo.com/7d071f5fac766bd721d4b556dcbf83fc.gif" alt="gyazo.png" width="450px" />

停止するとまたlsなど別のコマンドが入力できます。

再度、`npx expo start --tunnel`コマンドを実行してサーバー起動 => `ctrl`+`c`でサーバー停止を繰り返して操作に慣れましょう。 -->

## 3. Tips

ストアなどへ作ったアプリを公開する際の補足を[こちらに](./03-tips.md)まとめています。時間がある方は読んでみましょう。

## 4. チャレンジ課題｜選択実装

### 機能を追加してみましょう。

スマホアプリが作れているので、以下のようなWebアプリでは厳しい実装やスマホのセンサーなどを使った実装が面白いと思います。

- 現在地ベースの自動ロケーション検出
- 地図のUIから表示地点を選択
- 時間別/日別のグラフ表示
- その他好きな機能を実装

などなど

### 例: 加速度センサー（スマホを振る）機能を追加

Gemini CLIで以下のようなリクエストをしてみます。

```
> スマホを振ると画像一覧の画像の順番がアニメーションと共に入れ替わる機能を追加してください。
```

スマホの加速度センサーを使った機能が実装されました。

> このページの冒頭に載せていましたが、Expo Goで加速度センサーの機能が使えます。
> https://i.gyazo.com/30eecf55fa22658def30a40d43d40e85.gif

## 5. この章のまとめ

この章ではGitHub Codespacesを利用したバイブコーディングを体験してみました。  
また、APIという仕組みを利用してリアルタイムなデータを取得することも実践しました。

---

このページの内容は以上です。  
[◀ 目次ページ](./readme.md)
